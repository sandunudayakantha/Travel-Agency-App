=== CLOUDINARY CONFIGURATION DEBUG ===
Cloud name: djyfwvumd
API key: Set (length: 15)
API secret: Set (length: 27)
=== END CLOUDINARY DEBUG ===
Connected to MongoDB
Server running on port 5005
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'G' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'G' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 0 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 0 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 0 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 0 featured packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 2 places, total: 2
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'galle' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 2 places, total: 2
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tr' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tri' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'trin' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'trink' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 0 places, total: 0
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'trinko' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 0 places, total: 0
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tr' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 't' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Preprocessing location: {"googlePlaceId":"ChIJbZK_YvFy4ToRbER3g15MRMA","formattedAddress":"Unawatuna, Sri Lanka","coordinates":{"latitude":6.017446899999999,"longitude":80.2488596},"country":"Sri Lanka","region":"Southern Province","city":"Unawatuna","postalCode":"","phoneNumber":"","website":"","placeId":"ChIJbZK_YvFy4ToRbER3g15MRMA"}
Preprocessing tags: []
=== PLACE CREATION START ===
Request body: {
  "name": "Unawatuna",
  "description": "Located about 5 km southeast of Galle, Unawatuna is a popular destination for both relaxation and adventure. Its main beach is ideal for swimming, sunbathing, and snorkeling. Nearby attractions include the secluded Jungle Beach, the Japanese Peace Pagoda with panoramic views, and a sea turtle hatchery. Just a short drive away is the historic Galle Fort, a UNESCO World Heritage Site showcasing colonial architecture, boutique shops, and cafes. Unawatuna offers a perfect blend of natural beauty, water sports, and cultural experiences.",
  "shortDescription": "Unawatuna is a scenic coastal town in southern Sri Lanka, famous for its golden crescent-shaped beach, calm turquoise waters, and vibrant coral reefs.\r\n",
  "category": "attraction",
  "location": {
    "googlePlaceId": "ChIJbZK_YvFy4ToRbER3g15MRMA",
    "formattedAddress": "Unawatuna, Sri Lanka",
    "coordinates": {
      "latitude": 6.017446899999999,
      "longitude": 80.2488596
    },
    "country": "Sri Lanka",
    "region": "Southern Province",
    "city": "Unawatuna",
    "postalCode": "",
    "phoneNumber": "",
    "website": "",
    "placeId": "ChIJbZK_YvFy4ToRbER3g15MRMA"
  },
  "tags": [],
  "status": "active",
  "featured": "true"
}
Files count: 3
User ID: 68a2f9247aea83882af0c6c7
Validation passed, processing media files...
Processing 3 files...
Processing file 1: v10044g50000cmp5fr7og65jgvs2iev0.MP4 video/mp4
Video uploaded successfully: places/videos/vfldpg3byyujfa1nqceg
Processing file 2: WoC-Unawatuna-Beach-Featured.webp image/webp
Image uploaded successfully: places/images/ddiwkr1dm1bwn1pup9po
Processing file 3: Must-Visit-Beaches-in-Unawatuna-1050x700-1.jpg image/jpeg
Image uploaded successfully: places/images/cuqaawjuvi2qhva1v7am
Building place data...
Final place data: {
  "name": "Unawatuna",
  "description": "Located about 5 km southeast of Galle, Unawatuna is a popular destination for both relaxation and adventure. Its main beach is ideal for swimming, sunbathing, and snorkeling. Nearby attractions include the secluded Jungle Beach, the Japanese Peace Pagoda with panoramic views, and a sea turtle hatchery. Just a short drive away is the historic Galle Fort, a UNESCO World Heritage Site showcasing colonial architecture, boutique shops, and cafes. Unawatuna offers a perfect blend of natural beauty, water sports, and cultural experiences.",
  "shortDescription": "Unawatuna is a scenic coastal town in southern Sri Lanka, famous for its golden crescent-shaped beach, calm turquoise waters, and vibrant coral reefs.\r\n",
  "images": [
    {
      "public_id": "places/images/ddiwkr1dm1bwn1pup9po",
      "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755683909/places/images/ddiwkr1dm1bwn1pup9po.webp",
      "caption": "",
      "isPrimary": true
    },
    {
      "public_id": "places/images/cuqaawjuvi2qhva1v7am",
      "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755683911/places/images/cuqaawjuvi2qhva1v7am.jpg",
      "caption": "",
      "isPrimary": false
    }
  ],
  "videos": [
    {
      "public_id": "places/videos/vfldpg3byyujfa1nqceg",
      "url": "https://res.cloudinary.com/djyfwvumd/video/upload/v1755683905/places/videos/vfldpg3byyujfa1nqceg.mp4",
      "title": "",
      "duration": 11.285011,
      "thumbnail": {
        "public_id": "places/videos/vfldpg3byyujfa1nqceg_thumbnail",
        "url": "https://res.cloudinary.com/djyfwvumd/video/upload/v1755683905/places/videos/vfldpg3byyujfa1nqceg.jpg"
      }
    }
  ],
  "location": {
    "googlePlaceId": "ChIJbZK_YvFy4ToRbER3g15MRMA",
    "formattedAddress": "Unawatuna, Sri Lanka",
    "coordinates": {
      "latitude": 6.017446899999999,
      "longitude": 80.2488596
    },
    "country": "Sri Lanka",
    "region": "Southern Province",
    "city": "Unawatuna",
    "postalCode": "",
    "phoneNumber": "",
    "website": "",
    "placeId": "ChIJbZK_YvFy4ToRbER3g15MRMA"
  },
  "category": "attraction",
  "tags": [],
  "status": "active",
  "featured": true,
  "createdBy": "68a2f9247aea83882af0c6c7"
}
Creating place in database...
Place created successfully: new ObjectId("68a59c483b23ad299a688976")
=== PLACE CREATION END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 0 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 0 featured packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'iuna' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 0 places, total: 0
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'un' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'una' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'unawa' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
Found 0 tour types
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
GET /api/tour-types - Fetching all tour types
Found 0 tour types
Found 0 packages
Found 0 drivers, total: 0
Finding drivers with query: { status: 'active' }
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Found 0 drivers, total: 0
Found 0 packages
Found 6 places, total: 6
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Uploading tour type image to Cloudinary...
Tour type image uploaded successfully: tour-types/txktyylvff2he4qfu9lv
Tour type saved successfully: new ObjectId("68a59c9c3b23ad299a6889fa")
Tour type created and populated: Popular
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Uploading tour type image to Cloudinary...
Tour type image uploaded successfully: tour-types/gr8g3ojo4we9ackzauwn
Tour type saved successfully: new ObjectId("68a59cc63b23ad299a688a01")
Tour type created and populated: Down South
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
=== VEHICLE CREATION START ===
Request body: {
  "name": "Civic",
  "model": "Honda",
  "type": "sedan",
  "passengerCapacity": "2",
  "description": "Honda civic",
  "features": "[\"Type R\"]",
  "price": "{\"amount\":1000,\"currency\":\"USD\",\"perDay\":true}",
  "availability": "available",
  "location": "{\"city\":\"Elpitiya\",\"country\":\"Sri Lanka\",\"address\":\"Jambugahahena\"}",
  "specifications": "{\"year\":2025,\"mileage\":0,\"fuelType\":\"gasoline\",\"transmission\":\"automatic\",\"engineSize\":\"\",\"color\":\"\"}"
}
Files: 1
User ID: 68a2f9247aea83882af0c6c7
=== PARSING DEBUG ===
Original price type: string
Original price value: {"amount":1000,"currency":"USD","perDay":true}
Original location type: string
Original location value: {"city":"Elpitiya","country":"Sri Lanka","address":"Jambugahahena"}
Parsed price: { amount: 1000, currency: 'USD', perDay: true }
Parsed location: { city: 'Elpitiya', country: 'Sri Lanka', address: 'Jambugahahena' }
Parsed specifications: {
  year: 2025,
  mileage: 0,
  fuelType: 'gasoline',
  transmission: 'automatic',
  engineSize: '',
  color: ''
}
=== END PARSING DEBUG ===
Validation errors: []
Checking price validation. Price object: { amount: 1000, currency: 'USD', perDay: true }
Price amount: 1000
Price amount type: number
Validation passed, processing images...
Processing 1 images...
Uploading file: civic.avif
Image uploaded successfully: vehicles/weu0a4h0hukxeayn5osk
Building vehicle data...
Vehicle data before parsing: {
  "name": "Civic",
  "model": "Honda",
  "type": "sedan",
  "passengerCapacity": "2",
  "description": "Honda civic",
  "features": "[\"Type R\"]",
  "price": {
    "amount": 1000,
    "currency": "USD",
    "perDay": true
  },
  "availability": "available",
  "location": {
    "city": "Elpitiya",
    "country": "Sri Lanka",
    "address": "Jambugahahena"
  },
  "specifications": {
    "year": 2025,
    "mileage": 0,
    "fuelType": "gasoline",
    "transmission": "automatic",
    "engineSize": "",
    "color": ""
  },
  "createdBy": "68a2f9247aea83882af0c6c7",
  "images": [
    {
      "public_id": "vehicles/weu0a4h0hukxeayn5osk",
      "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755684174/vehicles/weu0a4h0hukxeayn5osk.avif"
    }
  ]
}
Parsing features string: ["Type R"]
Parsed features: [ 'Type R' ]
Final vehicle data: {
  "name": "Civic",
  "model": "Honda",
  "type": "sedan",
  "passengerCapacity": "2",
  "description": "Honda civic",
  "features": [
    "Type R"
  ],
  "price": {
    "amount": 1000,
    "currency": "USD",
    "perDay": true
  },
  "availability": "available",
  "location": {
    "city": "Elpitiya",
    "country": "Sri Lanka",
    "address": "Jambugahahena"
  },
  "specifications": {
    "year": 2025,
    "mileage": 0,
    "fuelType": "gasoline",
    "transmission": "automatic",
    "engineSize": "",
    "color": ""
  },
  "createdBy": "68a2f9247aea83882af0c6c7",
  "images": [
    {
      "public_id": "vehicles/weu0a4h0hukxeayn5osk",
      "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755684174/vehicles/weu0a4h0hukxeayn5osk.avif"
    }
  ]
}
Creating vehicle in database...
Vehicle created successfully: new ObjectId("68a59d4f3b23ad299a688a13")
=== VEHICLE CREATION END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
=== TOUR GUIDE DELETE START ===
Tour Guide ID: 68a44d3dd0fe48cb34721c40
Deleting avatar from Cloudinary...
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Deleted avatar: tour-guides/md9v5zbvafsdsfwksy3f
Tour guide deleted successfully
=== TOUR GUIDE DELETE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Preprocessing languages string: ["Sinhala","English"]
Preprocessed languages: [ 'Sinhala', 'English' ]
Preprocessing specializations string: ["good","nice"]
Preprocessed specializations: [ 'good', 'nice' ]
=== TOUR GUIDE CREATION START ===
Request body: {
  "name": "Sandun Udaya Kantha",
  "age": "18",
  "email": "S@gmail.com",
  "phone": "0774181039",
  "languages": [
    "Sinhala",
    "English"
  ],
  "rating": "5",
  "bio": "Good person",
  "experience": "3",
  "specializations": [
    "good",
    "nice"
  ],
  "availability": "available"
}
File: 4d69fad1-291f-43fa-aa88-d2ce40309c64 2.jpg
User ID: 68a2f9247aea83882af0c6c7
Validation errors: [
  {
    type: 'field',
    value: '0774181039',
    msg: 'Please enter a valid phone number',
    path: 'phone',
    location: 'body'
  }
]
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Preprocessing languages string: ["esadas"]
Preprocessed languages: [ 'esadas' ]
Preprocessing specializations string: ["sdasd"]
Preprocessed specializations: [ 'sdasd' ]
=== TOUR GUIDE CREATION START ===
Request body: {
  "name": "Sandun Udaya Kantha",
  "age": "18",
  "email": "d@gmail.com",
  "phone": "1234567890",
  "languages": [
    "esadas"
  ],
  "rating": "3",
  "bio": "dasdas",
  "experience": "3",
  "specializations": [
    "sdasd"
  ],
  "availability": "available"
}
File: 4d69fad1-291f-43fa-aa88-d2ce40309c64 2.jpg
User ID: 68a2f9247aea83882af0c6c7
Validation passed, processing avatar...
Uploading avatar to Cloudinary...
Avatar uploaded successfully: tour-guides/z7xrwvfhnmmyuxez92jo
Building tour guide data...
Final tour guide data: {
  "name": "Sandun Udaya Kantha",
  "age": "18",
  "email": "d@gmail.com",
  "phone": "1234567890",
  "languages": [
    "esadas"
  ],
  "rating": "3",
  "bio": "dasdas",
  "experience": "3",
  "specializations": [
    "sdasd"
  ],
  "availability": "available",
  "createdBy": "68a2f9247aea83882af0c6c7",
  "avatar": {
    "public_id": "tour-guides/z7xrwvfhnmmyuxez92jo",
    "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755684337/tour-guides/z7xrwvfhnmmyuxez92jo.jpg"
  }
}
Creating tour guide in database...
Tour guide created successfully: new ObjectId("68a59df23b23ad299a688a2f")
=== TOUR GUIDE CREATION END ===
Finding drivers with query: { status: 'active' }
Found 0 drivers, total: 0
Finding drivers with query: { status: 'active' }
Found 0 drivers, total: 0
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
=== DRIVER CREATION START ===
Request body: [Object: null prototype] {
  name: 'Ayesh',
  age: 25,
  email: 'a@gmail.com',
  phone: '1234567890',
  licenseNumber: '123456789',
  licenseType: 'light',
  licenseExpiry: '2025-08-31',
  languages: '["English"]',
  rating: 5,
  level: 'expert',
  experience: 3,
  toursCompleted: 5,
  vehicleTypes: '["sedan"]',
  specializations: '[]',
  availability: 'available'
}
Files: {
  fieldname: 'avatar',
  originalname: 'images.jpeg',
  encoding: '7bit',
  mimetype: 'image/jpeg',
  buffer: <Buffer ff d8 ff e0 00 10 4a 46 49 46 00 01 01 00 00 01 00 01 00 00 ff db 00 84 00 09 06 07 12 13 12 15 14 13 12 16 16 15 15 18 1a 1a 18 17 15 18 18 16 15 1b ... 5775 more bytes>,
  size: 5825
}
Processing avatar upload...
Avatar uploaded: https://res.cloudinary.com/djyfwvumd/image/upload/v1755684400/driver-avatars/olnrw79l6jlewjla3hqx.jpg
Driver data to save: {
  "name": "Ayesh",
  "age": 25,
  "email": "a@gmail.com",
  "phone": "1234567890",
  "licenseNumber": "123456789",
  "licenseType": "light",
  "licenseExpiry": "2025-08-31T00:00:00.000Z",
  "languages": [
    "English"
  ],
  "rating": 5,
  "level": "expert",
  "avatar": {
    "public_id": "driver-avatars/olnrw79l6jlewjla3hqx",
    "url": "https://res.cloudinary.com/djyfwvumd/image/upload/v1755684400/driver-avatars/olnrw79l6jlewjla3hqx.jpg"
  },
  "bio": "",
  "experience": 3,
  "toursCompleted": 5,
  "vehicleTypes": [
    "sedan"
  ],
  "specializations": [],
  "availability": "available",
  "createdBy": "68a2f9247aea83882af0c6c7"
}
Saving driver: {
  name: 'Ayesh',
  email: 'a@gmail.com',
  licenseNumber: '123456789',
  level: 'expert',
  experience: 3,
  toursCompleted: 5
}
Driver created successfully: new ObjectId("68a59e303b23ad299a688a3b")
=== DRIVER CREATION END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Found 0 packages
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 6 places, total: 6
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Found 0 packages
Found 1 drivers, total: 1
Found 6 places, total: 6
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
POST /api/packages - Creating new package
Request body: [Object: null prototype] {
  title: 'Country tour',
  description: 'GO around the country',
  tourType: '68a59c9c3b23ad299a6889fa',
  days: '3',
  nights: '2',
  vehicle: '68a59d4f3b23ad299a688a13',
  guide: '68a59df23b23ad299a688a2f',
  driver: '68a59e303b23ad299a688a3b',
  price: '1000',
  featured: 'true',
  itinerary: '[{"day":1,"title":"Start From Colombo","description":"Just a short distance from Unawatuna, Dewata Beach offers excellent conditions for surfing, catering to both beginners and experienced surfers.  ￼\\n","places":["68a56af49298fa65fbb0b85b","68a568bb9298fa65fbb0b7da"]},{"day":2,"title":"heading to unawatuna","description":"Located nearby, this conservation center plays a crucial role in protecting endangered sea turtles, offering visitors a chance to learn about and support marine life preservation efforts. ()\\n","places":["68a59c483b23ad299a688976"]},{"day":3,"title":"at last","description":"A short hike through lush forest leads to this secluded cove, offering snorkeling opportunities amidst vibrant marine life and a tranquil atmosphere away from the main tourist areas.  ￼\\n","places":["68a570449298fa65fbb0b9b5","68a571459298fa65fbb0b9e0","68a5730e9298fa65fbb0ba2a"]}]'
}
Files: 4
Processing package image upload...
Package image uploaded: https://res.cloudinary.com/djyfwvumd/image/upload/v1755684704/package-images/myjgbvf3c3lh3iqtsxrq.jpg
Processing video uploads...
Processing video for day 0
Video uploaded for day 0: https://res.cloudinary.com/djyfwvumd/video/upload/v1755684735/package-videos/fwzyaukvonyjuhj6qcgt.mp4
Processing video for day 1
Video uploaded for day 1: https://res.cloudinary.com/djyfwvumd/video/upload/v1755684751/package-videos/x2x2hx4u5zncxobdmn9p.mp4
Processing video for day 2
Video uploaded for day 2: https://res.cloudinary.com/djyfwvumd/video/upload/v1755684773/package-videos/fezdaqnzu3e5wztdo45o.mp4
Package data to create: {
  title: 'Country tour',
  description: 'GO around the country',
  tourType: '68a59c9c3b23ad299a6889fa',
  days: 3,
  nights: 2,
  vehicle: '68a59d4f3b23ad299a688a13',
  guide: '68a59df23b23ad299a688a2f',
  driver: '68a59e303b23ad299a688a3b',
  price: 1000,
  featured: true,
  image: {
    public_id: 'package-images/myjgbvf3c3lh3iqtsxrq',
    url: 'https://res.cloudinary.com/djyfwvumd/image/upload/v1755684704/package-images/myjgbvf3c3lh3iqtsxrq.jpg'
  },
  itinerary: [
    {
      day: 1,
      title: 'Start From Colombo',
      description: 'Just a short distance from Unawatuna, Dewata Beach offers excellent conditions for surfing, catering to both beginners and experienced surfers.  ￼\n',
      places: [Array],
      video: [Object]
    },
    {
      day: 2,
      title: 'heading to unawatuna',
      description: 'Located nearby, this conservation center plays a crucial role in protecting endangered sea turtles, offering visitors a chance to learn about and support marine life preservation efforts. ()\n',
      places: [Array],
      video: [Object]
    },
    {
      day: 3,
      title: 'at last',
      description: 'A short hike through lush forest leads to this secluded cove, offering snorkeling opportunities amidst vibrant marine life and a tranquil atmosphere away from the main tourist areas.  ￼\n',
      places: [Array],
      video: [Object]
    }
  ],
  createdBy: '68a2f9247aea83882af0c6c7'
}
Saving package: {
  title: 'Country tour',
  tourType: new ObjectId("68a59c9c3b23ad299a6889fa"),
  days: 3,
  nights: 2,
  vehicle: new ObjectId("68a59d4f3b23ad299a688a13"),
  guide: new ObjectId("68a59df23b23ad299a688a2f"),
  driver: new ObjectId("68a59e303b23ad299a688a3b"),
  price: 1000,
  featured: true,
  itineraryLength: 3
}
Package created successfully: new ObjectId("68a59fac3b23ad299a688a91")
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5a0413b23ad299a688b4c")
Package: Country tour
User: Sandun
Email: s@gmail.com
Start Date: 2025-08-31T00:00:00.000Z
Phone: 7741810390
Status: pending
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 6 places, total: 6
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 6 places, total: 6
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 1 packages
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T10:11:39.787Z,
  __v: 0,
  lastLogin: 2025-08-20T10:11:39.786Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  title: 'supiri',
  comment: 'ayet enawa'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: 'supiri',
  commentLength: 10
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5a1013b23ad299a688ca2
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T10:19:22.703Z,
  __v: 0,
  lastLogin: 2025-08-20T10:19:22.701Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  title: 'undefined',
  comment: 'supiri'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 6
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: No authorization header
Cookies: Cookies present
No token found - authentication failed
Protect middleware - checking authentication
Headers: No authorization header
Cookies: Cookies present
No token found - authentication failed
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5a13e3b23ad299a688dc0
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T10:20:30.720Z,
  __v: 0,
  lastLogin: 2025-08-20T10:20:30.718Z
}
Creating review - Body: [Object: null prototype] {
  packageId: 'undefined',
  rating: '5',
  title: 'undefined',
  comment: 'syper'
}
Creating review - Files: []
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: undefined,
  rating: 5,
  title: undefined,
  commentLength: 5
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Saving message: {
  name: 'Sandun Udaya Kantha',
  email: 'samanthapema@gmail.com',
  subject: 'wanna boook',
  status: 'unread',
  priority: 'medium',
  hasUser: false
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 packages
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59cc63b23ad299a688a01' }
Package filter: { tourType: '68a59cc63b23ad299a688a01' }
Finding packages with query: { tourType: '68a59cc63b23ad299a688a01' }
Found 0 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59c9c3b23ad299a6889fa' }
Package filter: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding packages with query: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59cc63b23ad299a688a01' }
Package filter: { tourType: '68a59cc63b23ad299a688a01' }
Finding packages with query: { tourType: '68a59cc63b23ad299a688a01' }
Found 0 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59c9c3b23ad299a6889fa' }
Package filter: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding packages with query: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Creating custom inquiry with data: {
  contactInfo: {
    name: 'Sandun Udaya Kantha',
    email: 'sandunudayakantha.eg@gmail.com',
    phone: '774181039',
    country: 'Sri Lanka'
  },
  tripDetails: {
    startDate: '2025-08-31T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 4,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
Found 2 tour types
Existing user found: yes
Updating existing user
GET /api/tour-types - Fetching all tour types
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5a17c3b23ad299a688e9f
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:35:28.040Z,
  __v: 0,
  lastLogin: 2025-08-20T11:35:28.039Z
}
Creating review - Body: [Object: null prototype] {
  packageId: 'undefined',
  rating: '5',
  title: 'undefined',
  comment: 'supr'
}
Creating review - Files: []
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: undefined,
  rating: 5,
  title: undefined,
  commentLength: 4
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b3143b23ad299a6890d7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:36:03.564Z,
  __v: 0,
  lastLogin: 2025-08-20T11:36:03.563Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  title: 'undefined',
  comment: 'dd'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 2
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b33a3b23ad299a68911a
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:46:42.786Z,
  __v: 0,
  lastLogin: 2025-08-20T11:46:42.785Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  comment: 'kjkjk'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 5
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:46:42.786Z,
  __v: 0,
  lastLogin: 2025-08-20T11:46:42.785Z
}
Creating review - Body: [Object: null prototype] { rating: '5', comment: 'kjkjk' }
Creating review - Files: []
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: undefined,
  rating: 5,
  title: undefined,
  commentLength: 5
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b5b83b23ad299a6892c4
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b5af3b23ad299a6892ba
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:51:53.987Z,
  __v: 0,
  lastLogin: 2025-08-20T11:51:53.987Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  comment: 'csdczs'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 6
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b6e53b23ad299a68942b
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:52:42.188Z,
  __v: 0,
  lastLogin: 2025-08-20T11:52:42.186Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  comment: 'fwedasd'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 7
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Existing user found: yes
Updating existing user
User updated successfully
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b7353b23ad299a6894bf
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T11:59:47.815Z,
  __v: 0,
  lastLogin: 2025-08-20T11:59:47.814Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  comment: 'ook'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: undefined,
  commentLength: 3
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Attempting to delete review with ID: 68a5b8bd3b23ad299a6895e1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T12:00:51.991Z,
  __v: 0,
  lastLogin: 2025-08-20T12:00:51.989Z
}
Creating review - Body: [Object: null prototype] { rating: '5', comment: 'lkl' }
Creating review - Files: []
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: undefined,
  rating: 5,
  title: undefined,
  commentLength: 3
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Creating custom inquiry with data: {
  contactInfo: {
    name: 'sasa',
    email: 's@gmai.com',
    phone: '12345678099',
    country: 'sl'
  },
  tripDetails: {
    startDate: '2025-08-31T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 6,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Creating custom inquiry with data: {
  contactInfo: {
    name: 'ds',
    email: 's@gmail.com',
    phone: '123456790',
    country: 'd'
  },
  tripDetails: {
    startDate: '2025-08-31T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 5,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gal' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'galle' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'galle' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gal' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
Found 4 places, total: 4
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Finding drivers with query: { status: 'active' }
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 packages
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 2 tour types
GET /api/packages - Query params: {}
Package filter: {}
Finding packages with query: {}
Found 1 drivers, total: 1
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 1 packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Found 1 drivers, total: 1
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 't' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tr' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'trn' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 0 places, total: 0
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tr' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tri' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gal' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'galle' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'c' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'co' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'col' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 6 places, total: 6
=== GET PLACES END ===
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'colo' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'col' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'co' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'k' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ka' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'kan' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'kand' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'kandy' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 't' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 1 places, total: 1
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'tr' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gal' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
Creating custom inquiry with data: {
  contactInfo: {
    name: 'sandun',
    email: 'tese@gnauk.com',
    phone: '1234567890',
    country: 'sd'
  },
  tripDetails: {
    startDate: '2025-08-23T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 6,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5c7563b23ad299a68a484")
Package: Country tour
User: sunil
Email: s@gmail.com
Start Date: 2025-08-30T00:00:00.000Z
Phone: 774181039
Status: pending
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Existing user found: yes
Updating existing user
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
Found 2 tour types
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Existing user found: yes
Updating existing user
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
User updated successfully
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Processing inquiry: new ObjectId("68a5c7203b23ad299a68a351")
Processing inquiry: new ObjectId("68a5bfbd3b23ad299a689b01")
Processing inquiry: new ObjectId("68a5bc563b23ad299a6899ad")
Processing inquiry: new ObjectId("68a5a3cc3b23ad299a688ffd")
First inquiry preferences: {
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  vehicle: { name: 'Civic' },
  tourGuide: { name: 'Sandun Udaya Kantha' },
  driver: { name: 'Ayesh' }
}
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 2 tour types
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User updated successfully
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 drivers, total: 1
Found 1 featured packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 1 drivers, total: 1
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User updated successfully
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 1 featured packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 1 drivers, total: 1
Found 2 tour types
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
User updated successfully
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User updated successfully
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 2 tour types
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
User updated successfully
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 featured packages
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 2 tour types
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Existing user found: yes
Updating existing user
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User updated successfully
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Found 2 tour types
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 1 featured packages
Found 2 tour types
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 2 tour types
Found 1 featured packages
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
Found 4 places, total: 4
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'galle' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Saving message: {
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakanthaeg@gmail.com',
  subject: 'utyi',
  status: 'unread',
  priority: 'medium',
  hasUser: false
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Existing user found: yes
Updating existing user
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Creating review - User: {
  avatar: {
    public_id: null,
    url: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ'
  },
  preferences: {
    favoriteDestinations: [],
    travelStyle: 'adventure',
    groupSize: 'couple'
  },
  _id: new ObjectId("68a2f9247aea83882af0c6c7"),
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  socialProvider: 'google',
  role: 'admin',
  isVerified: true,
  createdAt: 2025-08-18T09:57:56.011Z,
  updatedAt: 2025-08-20T14:47:40.552Z,
  __v: 0,
  lastLogin: 2025-08-20T14:47:40.550Z
}
Creating review - Body: [Object: null prototype] {
  packageId: '68a59fac3b23ad299a688a91',
  rating: '5',
  title: 'jhgjhg',
  comment: 'gfhgf'
}
Creating review - Files: []
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Saving review: {
  user: new ObjectId("68a2f9247aea83882af0c6c7"),
  package: new ObjectId("68a59fac3b23ad299a688a91"),
  rating: 5,
  title: 'jhgjhg',
  commentLength: 5
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Error creating review: ReferenceError: stats is not defined
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/reviews.js:378:84
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5e0363b23ad299a68d6b8")
Package: Country tour
User: dasdsdasdasdas
Email: s@gmail.com
Start Date: 2025-08-30T00:00:00.000Z
Phone: 21312332434344
Status: pending
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5e0913b23ad299a68d6bc")
Package: Country tour
User: dasdsdasdasdas
Email: s@gmail.com
Start Date: 2025-08-23T00:00:00.000Z
Phone: 21312332434344
Status: pending
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5e0bc3b23ad299a68d6c2")
Package: Country tour
User: dasdsdasdasdas
Email: s@gmail.com
Start Date: 2025-08-22T00:00:00.000Z
Phone: 34324234242
Status: pending
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User updated successfully
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5e1013b23ad299a68d8fe")
Package: Country tour
User: dasdsdasdasdas
Email: s@gmail.com
Start Date: 2025-08-30T00:00:00.000Z
Phone: 21312332434344
Status: pending
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59cc63b23ad299a688a01' }
Package filter: { tourType: '68a59cc63b23ad299a688a01' }
Finding packages with query: { tourType: '68a59cc63b23ad299a688a01' }
Found 0 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59c9c3b23ad299a6889fa' }
Package filter: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding packages with query: { tourType: '68a59c9c3b23ad299a6889fa' }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59cc63b23ad299a688a01' }
Package filter: { tourType: '68a59cc63b23ad299a688a01' }
Finding packages with query: { tourType: '68a59cc63b23ad299a688a01' }
Found 0 packages
GET /api/packages - Query params: { page: '1', limit: '12', tourType: '68a59cc63b23ad299a688a01' }
Package filter: { tourType: '68a59cc63b23ad299a688a01' }
Finding packages with query: { tourType: '68a59cc63b23ad299a688a01' }
Found 0 packages
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'g' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gal' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'gall' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 3 places, total: 3
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Creating custom inquiry with data: {
  contactInfo: {
    name: 'Sandun Udaya Kantha',
    email: 'sandunudayakantha.eg@gmail.com',
    phone: '12345678909',
    country: 'uytu'
  },
  tripDetails: {
    startDate: '2025-08-30T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '5s', name: 'Luxury (5★)', stars: 5, pricePerNight: 160 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 4,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '5s', name: 'Luxury (5★)', stars: 5, pricePerNight: 160 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Existing user found: yes
Updating existing user
User updated successfully
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Creating custom inquiry with data: {
  contactInfo: {
    name: 'Sandun Udaya Kantha',
    email: 'sandunudayakantha.eg@gmail.com',
    phone: '1234567890',
    country: 'Sri Lanka'
  },
  tripDetails: {
    startDate: '2025-08-30T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 1,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Existing user found: yes
Updating existing user
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 2 tour types
Existing user found: yes
Updating existing user
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
User updated successfully
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 packages
Existing user found: yes
Updating existing user
Found 2 tour types
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
Existing user found: yes
Updating existing user
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Existing user found: yes
Updating existing user
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User updated successfully
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 6 places, total: 6
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12' }
Applied filters: {}
Found 6 places, total: 6
=== GET PLACES END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
User updated successfully
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Existing user found: yes
Updating existing user
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
Found 1 drivers, total: 1
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Existing user found: yes
Updating existing user
User updated successfully
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 2 tour types
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 2 tour types
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Found 2 tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
Found 2 tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== BOOKING CREATED ===
Booking ID: new ObjectId("68a5e9263b23ad299a68eb9b")
Package: Country tour
User: eroreiorieroie
Email: d@gmail.com
Start Date: 2025-08-30T00:00:00.000Z
Phone: 3123123123123
Status: pending
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Creating custom inquiry with data: {
  contactInfo: {
    name: 'it23231832 KANTHA E G S U',
    email: 'it23231832@my.sliit.lk',
    phone: '12345678900',
    country: 's'
  },
  tripDetails: {
    startDate: '2025-08-31T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: {
      price: [Object],
      location: [Object],
      specifications: [Object],
      ratings: [Object],
      _id: '68a59d4f3b23ad299a688a13',
      name: 'Civic',
      model: 'Honda',
      type: 'sedan',
      passengerCapacity: 2,
      description: 'Honda civic',
      features: [Array],
      images: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:02:55.321Z',
      updatedAt: '2025-08-20T10:02:55.321Z',
      __v: 0
    },
    tourGuide: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59df23b23ad299a688a2f',
      name: 'Sandun Udaya Kantha',
      age: 18,
      email: 'd@gmail.com',
      phone: '1234567890',
      languages: [Array],
      rating: 3,
      bio: 'dasdas',
      experience: 3,
      specializations: [Array],
      availability: 'available',
      createdBy: [Object],
      status: 'active',
      reviews: [],
      createdAt: '2025-08-20T10:05:38.360Z',
      updatedAt: '2025-08-20T10:05:38.360Z',
      __v: 0
    },
    driver: {
      avatar: [Object],
      ratings: [Object],
      _id: '68a59e303b23ad299a688a3b',
      name: 'Ayesh',
      age: 25,
      email: 'a@gmail.com',
      phone: '1234567890',
      licenseNumber: '123456789',
      licenseType: 'light',
      licenseExpiry: '2025-08-31T00:00:00.000Z',
      languages: [Array],
      rating: 5,
      bio: '',
      experience: 3,
      toursCompleted: 5,
      level: 'expert',
      vehicleTypes: [Array],
      specializations: [],
      availability: 'available',
      status: 'active',
      createdBy: [Object],
      reviews: [],
      createdAt: '2025-08-20T10:06:40.909Z',
      updatedAt: '2025-08-20T10:06:40.909Z',
      __v: 0
    }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 2,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: { name: 'Civic' },
    tourGuide: { name: 'Sandun Udaya Kantha' },
    driver: { name: 'Ayesh' }
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Get booking error: TypeError: Cannot read properties of null (reading 'toString')
    at /Users/sandunudayakantha/Documents/GitHub/Travel-Agency-App/backend/routes/bookings.js:214:22
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Authorization check: {
  userRole: 'admin',
  requiredRoles: [ 'admin' ],
  userId: new ObjectId("68a2f9247aea83882af0c6c7"),
  userEmail: 'sandunudayakantha.eg@gmail.com'
}
Access granted: User role authorized
=== BOOKING STATUS UPDATED ===
Booking ID: new ObjectId("68a5e9263b23ad299a68eb9b")
New Status: reviewed
Reviewed By: Sandun Udaya Kantha
Admin Notes: 
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Existing user found: yes
Updating existing user
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User updated successfully
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Found 2 tour types
Existing user found: yes
Updating existing user
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Existing user found: yes
Updating existing user
User updated successfully
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Existing user found: yes
Updating existing user
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User updated successfully
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', search: 'ga' }
Applied filters: {
  '$or': [
    { name: [Object] },
    { name: [Object] },
    { name: [Object] },
    { description: [Object] },
    { shortDescription: [Object] },
    { tags: [Object] }
  ]
}
Found 4 places, total: 4
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 1 featured packages
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Found 2 tour types
Existing user found: yes
Updating existing user
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 5 places, total: 5
=== GET PLACES END ===
Existing user found: yes
Updating existing user
User updated successfully
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 2 tour types
Existing user found: yes
Updating existing user
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
User updated successfully
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Existing user found: yes
Updating existing user
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
User updated successfully
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
Found 2 tour types
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Existing user found: yes
Updating existing user
User updated successfully
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Finding drivers with query: { status: 'active' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 drivers, total: 1
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 5 places, total: 5
=== GET PLACES END ===
GET /api/tour-types - Fetching all tour types
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 1 drivers, total: 1
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Finding drivers with query: { status: 'active' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Existing user found: yes
Updating existing user
Existing user found: yes
Updating existing user
User updated successfully
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Found 2 tour types
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Found 1 drivers, total: 1
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Existing user found: yes
Updating existing user
User updated successfully
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Existing user found: yes
Updating existing user
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
User updated successfully
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Finding drivers with query: { status: 'active' }
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 5 places, total: 5
=== GET PLACES END ===
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Existing user found: yes
Updating existing user
User updated successfully
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Found 1 packages
Found 2 tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding drivers with query: { status: 'active' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Finding drivers with query: { status: 'active' }
Found 2 tour types
Existing user found: yes
Updating existing user
Found 5 places, total: 5
=== GET PLACES END ===
User updated successfully
Found 1 drivers, total: 1
GET /api/tour-types - Fetching all tour types
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 packages
Found 2 tour types
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages - Query params: { page: '1', limit: '12' }
Package filter: {}
Finding packages with query: {}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Existing user found: yes
Updating existing user
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User updated successfully
Found 2 tour types
User updated successfully
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Existing user found: yes
Updating existing user
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
User updated successfully
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
Place found: Unawatuna
=== GET SINGLE PLACE END ===
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Trinco
=== GET SINGLE PLACE END ===
User updated successfully
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Existing user found: yes
Updating existing user
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Found 2 tour types
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
Existing user found: yes
Updating existing user
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/tour-types - Fetching all tour types
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 2 tour types
Found 1 featured packages
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User updated successfully
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Finding drivers with query: { status: 'active' }
Found 1 drivers, total: 1
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 5 places, total: 5
=== GET PLACES END ===
Found 1 drivers, total: 1
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
=== GET PLACES START ===
Query params: { page: '1', limit: '12', featured: 'true' }
Applied filters: { featured: true }
Found 2 tour types
Finding drivers with query: { status: 'active' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Found 1 drivers, total: 1
Found 5 places, total: 5
=== GET PLACES END ===
Finding drivers with query: { status: 'active' }
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 drivers, total: 1
Existing user found: yes
Updating existing user
User updated successfully
Creating custom inquiry with data: {
  contactInfo: {
    name: 'it23231832 KANTHA E G S U',
    email: 'it23231832@my.sliit.lk',
    phone: '1234567890',
    country: 'dsasdas'
  },
  tripDetails: {
    startDate: '2025-08-31T00:00:00.000Z',
    travellers: 2,
    totalDays: 1,
    totalNights: 0
  },
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: null,
    tourGuide: null,
    driver: null
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined,
  itineraryLength: 5,
  costBreakdown: {
    hotelCost: 0,
    transportCost: 0,
    guideCost: 0,
    driverCost: 0,
    taxes: 0,
    totalCost: 0
  }
}
Custom inquiry object before save: {
  preferences: {
    hotelTier: { id: '4s', name: 'Premium (4★)', stars: 4, pricePerNight: 85 },
    vehicle: null,
    tourGuide: null,
    driver: null
  },
  selectedVehicle: undefined,
  selectedTourGuide: undefined,
  selectedDriver: undefined
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Existing user found: yes
Updating existing user
User updated successfully
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/tour-types - Fetching all tour types
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Found 2 tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Place found: Galle
=== GET SINGLE PLACE END ===
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
User updated successfully
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Existing user found: yes
Updating existing user
User updated successfully
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
User updated successfully
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Colombo
=== GET SINGLE PLACE END ===
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Ella
=== GET SINGLE PLACE END ===
Place found: Trinco
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Found 2 tour types
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
User updated successfully
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/tour-types - Fetching all tour types
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
GET /api/tour-types - Fetching all tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a2f9247aea83882af0c6c7
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin'
}
Current user info: {
  id: new ObjectId("68a2f9247aea83882af0c6c7"),
  email: 'sandunudayakantha.eg@gmail.com',
  role: 'admin',
  name: 'Sandun Udaya Kantha'
}
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Clerk sync request body: {
  clerkId: 'user_31RbJCjfCFszqZsGShqFkdOoqBu',
  name: 'Sandun Udaya Kantha',
  email: 'sandunudayakantha.eg@gmail.com',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVJiSkFuekx0a3V2ejQ3V2FJaThaR0RsUzkifQ',
  isVerified: true,
  socialProvider: 'google'
}
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Existing user found: yes
Updating existing user
User updated successfully
Place found: Galle
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Kandy
=== GET SINGLE PLACE END ===
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
GET /api/tour-types - Fetching all tour types
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
Protect middleware - checking authentication
Headers: Authorization header present
Cookies: Cookies present
Token found in authorization header
Verifying JWT token...
Token verified, user ID: 68a41a3613de4b39207c6b3e
Found 2 tour types
User authenticated: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user'
}
Current user info: {
  id: new ObjectId("68a41a3613de4b39207c6b3e"),
  email: 'it23231832@my.sliit.lk',
  role: 'user',
  name: 'it23231832 KANTHA E G S U'
}
GET /api/tour-types - Fetching all tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
GET /api/packages/:id - ID: 68a59fac3b23ad299a688a91
Finding package with ID: 68a59fac3b23ad299a688a91
Finding one package with query: { _id: '68a59fac3b23ad299a688a91' }
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
Found 2 tour types
Package found: yes
Driver field before populate: new ObjectId("68a59e303b23ad299a688a3b")
Driver type: object
Package found: Country tour
Place found: Colombo
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a56af49298fa65fbb0b85b
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
Place found: Colombo
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a568bb9298fa65fbb0b7da
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Place found: Unawatuna
=== GET SINGLE PLACE END ===
Place found: Galle
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
=== GET SINGLE PLACE START ===
Place ID: 68a59c483b23ad299a688976
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Existing user found: yes
Updating existing user
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Unawatuna
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a570449298fa65fbb0b9b5
User updated successfully
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Kandy
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a571459298fa65fbb0b9e0
Place found: Trinco
=== GET SINGLE PLACE END ===
Place found: Ella
=== GET SINGLE PLACE END ===
=== GET SINGLE PLACE START ===
Place ID: 68a5730e9298fa65fbb0ba2a
Place found: Trinco
=== GET SINGLE PLACE END ===
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Found 1 featured packages
GET /api/packages/featured
Finding packages with query: { featured: true }
Finding drivers with query: {
  _id: {
    '$in': [ new ObjectId("68a59e303b23ad299a688a3b") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
Clerk sync request body: {
  clerkId: 'user_31UiVkTYPQgFO16GcBN5GRNOmwn',
  name: 'it23231832 KANTHA E G S U',
  email: 'it23231832@my.sliit.lk',
  avatar: 'https://img.clerk.com/eyJ0eXBlIjoicHJveHkiLCJzcmMiOiJodHRwczovL2ltYWdlcy5jbGVyay5kZXYvb2F1dGhfZ29vZ2xlL2ltZ18zMVVpVmw3NGszU3l0cWZhcUtkcVNWM2dxN2UifQ',
  isVerified: true,
  socialProvider: 'google'
}
Found 1 featured packages
Existing user found: yes
Updating existing user
Finding packages with query: {
  _id: {
    '$in': [ new ObjectId("68a59fac3b23ad299a688a91") ],
    [Symbol(mongoose#trustedSymbol)]: true
  }
}
User updated successfully
